{"version":3,"file":"debug.mjs","sources":["../src/devtools/custom.js","../src/debug.js","../src/devtools/renderer.js","../src/devtools/index.js","../src/index.js"],"sourcesContent":["import { Fragment } from 'preact';\n\n/**\n * Get the type/category of a vnode\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').NodeType}\n */\nexport function getNodeType(vnode) {\n\tif (vnode.type===Fragment) return 'Wrapper';\n\telse if (typeof vnode.type==='function') return 'Composite';\n\telse if (typeof vnode.type==='string') return 'Native';\n\treturn 'Text';\n}\n\n/**\n * Get human readable name of the component/dom element\n * @param {import('../internal').VNode} vnode\n * @returns {string}\n */\nexport function getDisplayName(vnode) {\n\tif (vnode.type===Fragment) return 'Fragment';\n\telse if (typeof vnode.type==='function') return vnode.type.displayName || vnode.type.name;\n\telse if (typeof vnode.type==='string') return vnode.type;\n\treturn '#text';\n}\n\n/**\n * Deeply mutate a property by walking down an array of property keys\n * @param {object} obj\n * @param {Array<string | number>} path\n * @param {any} value\n */\nexport function setIn(obj, path, value) {\n\tlet last = path.pop();\n\tlet parent = path.reduce((acc, attr) => acc ? acc[attr] : null, obj);\n\tif (parent) {\n\t\tparent[last] = value;\n\t}\n}\n\n/**\n * Get devtools compatible data from vnode\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').DevtoolData}\n */\nexport function getData(vnode) {\n\tlet c = vnode._component;\n\n\t/** @type {import('../internal').DevtoolsUpdater | null} */\n\tlet updater = null;\n\n\tif (c!=null) {\n\t\t// These functions will be called when the user changes state, props or\n\t\t// context values via the devtools ui panel\n\t\tupdater = {\n\t\t\tsetState: c.setState.bind(c),\n\t\t\tforceUpdate: c.forceUpdate.bind(c),\n\t\t\tsetInState(path, value) {\n\t\t\t\tc.setState(prev => {\n\t\t\t\t\tsetIn(prev, path, value);\n\t\t\t\t\treturn prev;\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetInProps(path, value) {\n\t\t\t\tsetIn(vnode.props, path, value);\n\t\t\t\tc.setState({});\n\t\t\t},\n\t\t\tsetInContext(path, value) {\n\t\t\t\tsetIn(c.context, path, value);\n\t\t\t\tc.setState({});\n\t\t\t}\n\t\t};\n\t}\n\n\tlet children = getChildren(vnode);\n\n\tlet duration = vnode.endTime - vnode.startTime;\n\treturn {\n\t\tnodeType: getNodeType(vnode),\n\t\ttype: vnode.type,\n\t\tname: getDisplayName(vnode),\n\t\tref: vnode.ref || null,\n\t\tkey: vnode.key || null,\n\t\tupdater,\n\t\ttext: vnode.text,\n\t\tstate: c!=null ? c.state : null,\n\t\tprops: vnode.props,\n\t\t// The devtools inline text children if they are the only child\n\t\tchildren: vnode.text==null\n\t\t\t? children!=null && children.length==1 && children[0].text!=null\n\t\t\t\t? children[0].text\n\t\t\t\t: children\n\t\t\t: null,\n\t\tpublicInstance: getInstance(vnode),\n\t\tmemoizedInteractions: [],\n\n\t\t// Profiler data\n\t\tactualDuration: duration,\n\t\tactualStartTime: vnode.startTime,\n\t\ttreeBaseDuration: duration\n\t};\n}\n\n/**\n * Get all rendered vnode children as an array. Moreover we need to filter\n * out `null` or other falsy children.\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').VNode[]}\n */\nexport function getChildren(vnode) {\n\tlet c = vnode._component;\n\n\tif (c==null) {\n\t\treturn vnode._children!=null ? vnode._children.filter(Boolean) : [];\n\t}\n\n\treturn !Array.isArray(c._prevVNode) && c._prevVNode!=null\n\t\t? [c._prevVNode]\n\t\t: null;\n}\n\n/**\n * Check if a vnode is a root node\n * @param {import('../internal').VNode} vnode\n * @returns {boolean}\n */\nexport function isRoot(vnode) {\n\t// Timings of root vnodes will never be set\n\treturn vnode.type===Fragment && vnode.endTime==-1;\n}\n\n/**\n * Cache a vnode by its instance and retrieve previous vnodes by the next\n * instance.\n *\n * We need this to be able to identify the previous vnode of a given instance.\n * For components we want to check if we already rendered it and use the class\n * instance as key. For html elements we use the dom node as key.\n *\n * @param {import('../internal').VNode} vnode\n * @returns {import('../internal').Component | import('../internal').PreactElement | Text | null}\n */\nexport function getInstance(vnode) {\n\t// Use the parent element as instance for root nodes\n\tif (isRoot(vnode)) {\n\t\t// Edge case: When the tree only consists of components that have not rendered\n\t\t// anything into the DOM we revert to using the vnode as instance.\n\t\treturn vnode._children.length > 0 && vnode._children[0]._dom!=null\n\t\t\t? /** @type {import('../internal').PreactElement | null} */\n\t\t\t(vnode._children[0]._dom.parentNode)\n\t\t\t: vnode;\n\t}\n\tif (vnode._component!=null) return vnode._component;\n\tif (vnode.type===Fragment) return vnode.props;\n\treturn vnode._dom;\n}\n\n/**\n * Compare two objects\n * @param {object} a\n * @param {object} b\n * @param {boolean} [isProps]\n * @returns {boolean}\n */\nexport function shallowEqual(a, b, isProps) {\n\tif (a==null || b==null) return false;\n\n\tfor (let key in a) {\n\t\tif (isProps && key=='children' && b[key]!=null) continue;\n\t\tif (a[key]!==b[key]) return false;\n\t}\n\n\tif (Object.keys(a).length!==Object.keys(b).length) return false;\n\treturn true;\n}\n\n/**\n * Check if a vnode was actually updated\n * @param {import('../internal').VNode} next\n * @param {import('../internal').VNode} prev\n * @returns {boolean}\n */\nexport function hasDataChanged(prev, next) {\n\treturn (prev.props !== next.props && !shallowEqual(prev.props, next.props, true))\n\t\t|| (prev._component!=null &&\n\t\t\t!shallowEqual(next._component._prevState, next._component.state))\n\t\t|| prev._dom !== next._dom\n\t\t|| prev.ref !== next.ref;\n}\n\n/**\n * Check if a the profiling data ahs changed between vnodes\n * @param {import('../internal').VNode} next\n * @param {import('../internal').VNode} prev\n * @returns {boolean}\n */\nexport function hasProfileDataChanged(prev, next) {\n\treturn prev.startTime!==next.startTime || prev.endTime!==next.endTime;\n}\n","import { checkPropTypes } from 'prop-types';\nimport { getDisplayName } from './devtools/custom';\nimport { options, toChildArray } from 'preact';\n\nexport function initDebug() {\n\t/* eslint-disable no-console */\n\tlet oldBeforeDiff = options.diff;\n\n\toptions.diff = vnode => {\n\t\tlet { type, props } = vnode;\n\t\tlet children = props && props.children;\n\n\t\tif (type===undefined) {\n\t\t\tthrow new Error('Undefined component passed to createElement()\\n'+serializeVNode(vnode));\n\t\t}\n\n\t\tif (\n\t\t\tvnode.ref!==undefined &&\n\t\t\ttypeof vnode.ref!=='function' &&\n\t\t\ttypeof vnode.ref!=='object' &&\n\t\t\t!('$$typeof' in vnode)  // allow string refs when preact-compat is installed\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\n\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\n\t\t\t\tserializeVNode(vnode)\n\t\t\t);\n\t\t}\n\n\t\t// Check prop-types if available\n\t\tif (typeof vnode.type==='function' && vnode.type.propTypes) {\n\t\t\tcheckPropTypes(vnode.type.propTypes, vnode.props, getDisplayName(vnode), serializeVNode(vnode));\n\t\t}\n\n\t\tlet keys = [];\n\t\tfor (let deepChild of toChildArray(children)) {\n\t\t\tif (!deepChild || deepChild.key==null) continue;\n\n\t\t\tlet key = deepChild.key;\n\n\t\t\tif (keys.indexOf(key) !== -1) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Following component has two or more children with the ' +\n\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\n\t\t\t\t\t'in rendering process. Component: \\n\\n' +\n\t\t\t\t\tserializeVNode(vnode)\n\t\t\t\t);\n\n\t\t\t\t// Break early to not spam the console\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tkeys.push(key);\n\t\t}\n\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n\t};\n}\n\n/**\n * Serialize a vnode tree to a string\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function serializeVNode(vnode) {\n\tlet { props } = vnode;\n\tlet name = getDisplayName(vnode);\n\n\tlet attrs = '';\n\tif (props) {\n\t\tfor (let prop in props) {\n\t\t\tif (props.hasOwnProperty(prop) && prop!=='children') {\n\t\t\t\tlet value = props[prop];\n\n\t\t\t\t// If it is an object but doesn't have toString(), use Object.toString\n\t\t\t\tif (typeof value==='function') {\n\t\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\n\t\t\t\t}\n\n\t\t\t\tvalue = Object(value) === value && !value.toString\n\t\t\t\t\t? Object.prototype.toString.call(value)\n\t\t\t\t\t: value + '';\n\n\t\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\n\t\t\t}\n\t\t}\n\t}\n\n\tlet children = props.children;\n\treturn `<${name}${attrs}${children && children.length\n\t\t? '>..</'+name+'>'\n\t\t: ' />'}`;\n}\n","import { getData, getChildren, getInstance, hasProfileDataChanged, hasDataChanged, isRoot } from './custom';\n\n/**\n * Custom renderer tailored for Preact. It converts updated vnode trees\n * to events the devtools can understand.\n * @class Renderer\n */\nexport class Renderer {\n\tconstructor(hook, rid) {\n\n\t\t/** @type {string} */\n\t\tthis.rid = rid;\n\t\tthis.hook = hook;\n\n\t\t/** @type {Array<import('../internal').DevtoolsEvent>} */\n\t\tthis.pending = [];\n\n\t\t/**\n\t\t * Store the instance of a vnode. This will be later used to decide if a\n\t\t * vnode needs to be mounted or updated. For components the instance refers\n\t\t * to the actuall class instance whereas for dom nodes it refers to the\n\t\t * underlying dom element.\n\t\t * @type {WeakMap<import('../internal').Component | import('../internal').PreactElement | HTMLElement | Text, import('../internal').VNode>}\n\t\t */\n\t\tthis.inst2vnode = new WeakMap();\n\t\tthis.connected = false;\n\t}\n\n\t/**\n\t * Mark the connection status as ready so that we can proceed\n\t * to actually flush events.\n\t */\n\tmarkConnected() {\n\t\tthis.connected = true;\n\t\tthis.flushPendingEvents();\n\t}\n\n\t/**\n\t * Flush all queued events\n\t */\n\tflushPendingEvents() {\n\t\tif (!this.connected) return;\n\n\t\tlet events = this.pending;\n\t\tthis.pending = [];\n\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\tlet event = events[i];\n\t\t\tthis.hook.emit(event.type, event);\n\t\t}\n\t}\n\n\t/**\n\t * Recursively mount a vnode tree. Note that the devtools expectes the tree to\n\t * be mounted from the bottom up, otherwise the order will be messed up.\n\t * Therefore we mount children prior to mounting the vnode itself.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\tmount(vnode) {\n\t\tthis.inst2vnode.set(getInstance(vnode), vnode);\n\t\tlet data = getData(vnode);\n\n\t\t/** @type {Array<import('../internal').DevtoolsEvent>} */\n\t\tlet work = [{\n\t\t\tinternalInstance: vnode,\n\t\t\tdata,\n\t\t\trenderer: this.rid,\n\t\t\ttype: 'mount'\n\t\t}];\n\n\t\t// Children must be mounted first\n\t\tif (Array.isArray(data.children)) {\n\t\t\tlet stack = data.children.slice();\n\t\t\tlet item;\n\t\t\twhile ((item = stack.pop())!=null) {\n\t\t\t\tlet children = getChildren(item);\n\t\t\t\tstack.push(...children);\n\n\t\t\t\tthis.inst2vnode.set(getInstance(item), item);\n\n\t\t\t\tlet data = getData(item);\n\n\t\t\t\twork.push({\n\t\t\t\t\tinternalInstance: item,\n\t\t\t\t\tdata,\n\t\t\t\t\trenderer: this.rid,\n\t\t\t\t\ttype: 'mount'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = work.length; --i>=0;) {\n\t\t\tthis.pending.push(work[i]);\n\t\t}\n\n\t\t// Special event if we have a root\n\t\tif (isRoot(vnode)) {\n\t\t\tthis.pending.push({\n\t\t\t\tinternalInstance: vnode,\n\t\t\t\tdata,\n\t\t\t\trenderer: this.rid,\n\t\t\t\ttype: 'root'\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Update a vnode tree\n\t * @param {import('../internal').VNode} vnode\n\t */\n\tupdate(vnode) {\n\t\tlet data = getData(vnode);\n\n\t\t// Children must be updated first\n\t\tif (Array.isArray(data.children)) {\n\t\t\tfor (let i = 0; i < data.children.length; i++) {\n\t\t\t\tlet child = data.children[i];\n\t\t\t\tlet inst = getInstance(child);\n\n\t\t\t\tlet prevChild = this.inst2vnode.get(inst);\n\t\t\t\tif (prevChild==null) this.mount(child);\n\t\t\t\telse this.update(child);\n\n\t\t\t\t// Mutate child to keep referential equality intact\n\t\t\t\tdata.children[i] = this.inst2vnode.get(inst);\n\t\t\t}\n\t\t}\n\n\t\tlet prev = this.inst2vnode.get(data.publicInstance);\n\n\t\t// The `updateProfileTimes` event is a faster version of `updated` and\n\t\t// is processed much quicker inside the devtools extension.\n\t\tif (!hasDataChanged(prev, vnode) && hasProfileDataChanged(prev, vnode)) {\n\t\t\tthis.pending.push({\n\t\t\t\t// This property is only used as an id inside the devtools. The\n\t\t\t\t// relevant data will be read from `.data` instead which is a\n\t\t\t\t// normalized structure that every react release adheres to. This\n\t\t\t\t// makes backwards-compatibility easier instead of relying on internal\n\t\t\t\t// vnode/fiber shape.\n\t\t\t\tinternalInstance: prev,\n\t\t\t\tdata,\n\t\t\t\trenderer: this.rid,\n\t\t\t\ttype: 'updateProfileTimes'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pending.push({\n\t\t\t// This property is only used as an id inside the devtools. The\n\t\t\t// relevant data will be read from `.data` instead which is a\n\t\t\t// normalized structure that every react release adheres to. This\n\t\t\t// makes backwards-compatibility easier instead of relying on internal\n\t\t\t// vnode/fiber shape.\n\t\t\tinternalInstance: prev,\n\t\t\tdata,\n\t\t\trenderer: this.rid,\n\t\t\ttype: 'update'\n\t\t});\n\t}\n\n\t/**\n\t * Pass a rendered tree to the devtools. At this point elements have already\n\t * unmounted, so we don't need to check for removals and only update vs mount\n\t * instead.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\thandleCommitFiberRoot(vnode) {\n\t\tlet inst = getInstance(vnode);\n\n\t\tif (this.inst2vnode.has(inst)) this.update(vnode);\n\t\telse this.mount(vnode);\n\n\t\t// The devtools checks via the existance of this property if the devtools\n\t\t// profiler should be enabled or not. If it is missing from the first root\n\t\t// node the \"Profiler\" tab won't show up.\n\t\t/** @type {import('../internal').VNode} */\n\t\tlet root = null;\n\t\tif (isRoot(vnode)) {\n\n\t\t\t/** @type {*} */\n\t\t\t(vnode).treeBaseDuration = 0;\n\t\t\troot = vnode;\n\t\t}\n\t\telse {\n\t\t\t// \"rootCommitted\" always needs the actual root node for the profiler\n\t\t\t// to be able to collect timings. The `_ancestorComponent` property will\n\t\t\t// point to a vnode for a root node.\n\t\t\troot = vnode._component;\n\t\t\twhile (root._ancestorComponent!=null) {\n\t\t\t\troot = root._ancestorComponent;\n\t\t\t}\n\t\t}\n\n\t\tthis.pending.push({\n\t\t\tinternalInstance: root,\n\t\t\trenderer: this.rid,\n\t\t\tdata: getData(root),\n\t\t\ttype: 'rootCommitted'\n\t\t});\n\n\t\tthis.flushPendingEvents();\n\t\treturn vnode;\n\t}\n\n\t/**\n\t * Unmount a vnode recursively. Contrary to mounting or updating unmounting needs\n\t * to push the events in parent-first order. Because `options.unmount` is\n\t * already fired in parent-first order we don't need to traverse anything here.\n\t * @param {import('../internal').VNode} vnode\n\t */\n\thandleCommitFiberUnmount(vnode) {\n\t\tlet inst = getInstance(vnode);\n\t\tthis.inst2vnode.delete(inst);\n\n\t\t// Special case when unmounting a root (most prominently caused by webpack's\n\t\t// `hot-module-reloading`). If this happens we need to unmount the virtual\n\t\t// `Fragment` we're wrapping around each root just for the devtools.\n\n\t\tthis.pending.push({\n\t\t\tinternalInstance: vnode,\n\t\t\trenderer: this.rid,\n\t\t\ttype: 'unmount'\n\t\t});\n\t}\n\n\t/**\n\t * Get the dom element by a vnode\n\t * @param {import('../internal').VNode} vnode\n\t * @returns {import('../internal').PreactElement | Text}\n\t */\n\tgetNativeFromReactElement(vnode) {\n\t\treturn vnode._dom;\n\t}\n\n\t/**\n\t * Get a vnode by a dom element\n\t * @param {import('../internal').PreactElement | Text} dom\n\t * @returns {import('../internal').VNode | null}\n\t */\n\tgetReactElementFromNative(dom) {\n\t\treturn this.inst2vnode.get(dom) || null;\n\t}\n\n\t// Unused, but devtools expects it to be there\n\t/* istanbul ignore next */\n\twalkTree() {}\n\n\t// Unused, but devtools expects it to be there\n\t/* istanbul ignore next */\n\tcleanup() {}\n}\n","import { options, Component, Fragment } from 'preact';\nimport { Renderer } from './renderer';\n\n/**\n * Wrap function with generic error logging\n *\n * @param {*} fn\n * @returns\n */\nfunction catchErrors(fn) {\n\treturn function(arg) {\n\t\ttry {\n\t\t\treturn fn(arg);\n\t\t}\n\t\tcatch (e) {\n\t\t\t/* istanbul ignore next */\n\t\t\tconsole.error('The react devtools encountered an error');\n\t\t\t/* istanbul ignore next */\n\t\t\tconsole.error(e); // eslint-disable-line no-console\n\t\t}\n\t};\n}\n\n/* istanbul ignore next */\nlet noop = () => undefined;\n\nexport function initDevTools() {\n\t// This global variable is injected by the devtools\n\t/** @type {import('../internal').DevtoolsWindow} */\n\tlet hook = (window).__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\tif (hook==null) return;\n\n\t/** @type {(vnode: import('../internal').VNode) => void} */\n\tlet onCommitRoot = noop;\n\n\t/** @type {(vnode: import('../internal').VNode) => void} */\n\tlet onCommitUnmount = noop;\n\n\t// Initialize our custom renderer\n\tlet rid = Math.random().toString(16).slice(2);\n\tlet preactRenderer = new Renderer(hook, rid);\n\n\tcatchErrors(() => {\n\t\tlet isDev = false;\n\t\ttry {\n\t\t\tisDev = process.env.NODE_ENV!=='production';\n\t\t}\n\t\tcatch (e) {}\n\n\t\t// Tell devtools which bundle type we run in\n\t\twindow.parent.postMessage({\n\t\t\tsource: 'react-devtools-detector',\n\t\t\treactBuildType: /* istanbul ignore next */  isDev\n\t\t\t\t? 'development'\n\t\t\t\t: 'production'\n\t\t}, '*');\n\n\t\tlet renderer = {\n\t\t\tbundleType: /* istanbul ignore next */  isDev ? 1 : 0,\n\t\t\tversion: '16.5.2',\n\t\t\trendererPackageName: 'preact',\n\t\t\t// We don't need this, but the devtools `attachRenderer` function relys\n\t\t\t// it being there.\n\t\t\tfindHostInstanceByFiber(vnode) {\n\t\t\t\treturn vnode._dom;\n\t\t\t},\n\t\t\t// We don't need this, but the devtools `attachRenderer` function relys\n\t\t\t// it being there.\n\t\t\tfindFiberByHostInstance(instance) {\n\t\t\t\treturn preactRenderer.inst2vnode.get(instance) || null;\n\t\t\t}\n\t\t};\n\n\t\thook._renderers[rid] = renderer;\n\n\t\t// We can't bring our own `attachRenderer` function therefore we simply\n\t\t// prevent the devtools from overwriting our custom renderer by creating\n\t\t// a noop setter.\n\t\tObject.defineProperty(hook.helpers, rid, {\n\t\t\tget: () => preactRenderer,\n\t\t\tset: () => {\n\t\t\t\tif (!preactRenderer.connected) {\n\t\t\t\t\thelpers.markConnected();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tlet helpers = hook.helpers[rid];\n\n\t\t// Tell the devtools that we are ready to start\n\t\thook.emit('renderer-attached', {\n\t\t\tid: rid,\n\t\t\trenderer,\n\t\t\thelpers\n\t\t});\n\n\t\tonCommitRoot = catchErrors(root => {\n\t\t\t// Empty root\n\t\t\tif (root.type===Fragment && root._children.length==0) return;\n\n\t\t\tlet roots = hook.getFiberRoots(rid);\n\t\t\troot = helpers.handleCommitFiberRoot(root);\n\t\t\tif (!roots.has(root)) roots.add(root);\n\t\t});\n\n\t\tonCommitUnmount = catchErrors(vnode => {\n\t\t\thook.onCommitFiberUnmount(rid, vnode);\n\t\t});\n\t})();\n\n\t// Store (possible) previous hooks so that we don't overwrite them\n\tlet prevVNodeHook = options.vnode;\n\tlet prevCommitRoot = options.commit;\n\tlet prevBeforeUnmount = options.unmount;\n\tlet prevBeforeDiff = options.diff;\n\tlet prevAfterDiff = options.diffed;\n\n\toptions.vnode = (vnode) => {\n\t\t// Tiny performance improvement by initializing fields as doubles\n\t\t// from the start. `performance.now()` will always return a double.\n\t\t// See https://github.com/facebook/react/issues/14365\n\t\t// and https://slidr.io/bmeurer/javascript-engine-fundamentals-the-good-the-bad-and-the-ugly\n\t\tvnode.startTime = NaN;\n\t\tvnode.endTime = NaN;\n\n\t\tvnode.startTime = 0;\n\t\tvnode.endTime = -1;\n\t\tif (prevVNodeHook) prevVNodeHook(vnode);\n\t};\n\n\toptions.diff = (vnode) => {\n\t\tvnode.startTime = now();\n\t\tif (prevBeforeDiff!=null) prevBeforeDiff(vnode);\n\t};\n\n\toptions.diffed = (vnode) => {\n\t\tvnode.endTime = now();\n\t\tif (prevAfterDiff!=null) prevAfterDiff(vnode);\n\t};\n\n\toptions.commit = catchErrors((vnode) => {\n\t\t// Call previously defined hook\n\t\tif (prevCommitRoot!=null) prevCommitRoot(vnode);\n\n\t\t// These cases are already handled by `unmount`\n\t\tif (vnode==null) return;\n\t\tonCommitRoot(vnode);\n\t});\n\n\toptions.unmount = catchErrors((vnode) => {\n\t\t// Call previously defined hook\n\t\tif (prevBeforeUnmount!=null) prevBeforeUnmount(vnode);\n\t\tonCommitUnmount(vnode);\n\t});\n\n\t// Inject tracking into setState\n\tconst setState = Component.prototype.setState;\n\tComponent.prototype.setState = function(update, callback) {\n\t\t// Duplicated in setState() but doesn't matter due to the guard.\n\t\tlet s = (this._nextState!==this.state && this._nextState) || (this._nextState = Object.assign({}, this.state));\n\n\t\t// Needed in order to check if state has changed after the tree has been committed:\n\t\tthis._prevState = Object.assign({}, s);\n\n\t\treturn setState.call(this, update, callback);\n\t};\n}\n\n/**\n * Get current timestamp in ms. Used for profiling.\n * @returns {number}\n */\nexport let now = Date.now;\n\ntry {\n\t/* istanbul ignore else */\n\tnow = performance.now.bind(performance);\n}\ncatch (e) {}\n","import { initDebug } from './debug';\nimport { initDevTools } from './devtools';\n\nif (process.env.NODE_ENV==='development') {\n\tinitDebug();\n\tinitDevTools();\n}\n"],"names":["getNodeType","vnode","type","Fragment","getDisplayName","displayName","name","setIn","obj","path","value","last","pop","parent","reduce","acc","attr","getData","c","_component","updater","setState","bind","forceUpdate","setInState","prev","setInProps","props","setInContext","context","children","getChildren","duration","endTime","startTime","nodeType","ref","key","text","state","length","publicInstance","getInstance","memoizedInteractions","actualDuration","actualStartTime","treeBaseDuration","_children","filter","Boolean","Array","isArray","_prevVNode","isRoot","_dom","parentNode","shallowEqual","a","b","isProps","let","Object","keys","hasDataChanged","next","_prevState","hasProfileDataChanged","initDebug","oldBeforeDiff","options","diff","undefined","Error","serializeVNode","propTypes","checkPropTypes","toChildArray","deepChild","indexOf","console","error","push","attrs","prop","hasOwnProperty","toString","prototype","call","JSON","stringify","Renderer","constructor","hook","rid","pending","inst2vnode","WeakMap","connected","markConnected","flushPendingEvents","events","i","event","emit","mount","set","data","work","renderer","stack","slice","item","update","child","inst","prevChild","get","handleCommitFiberRoot","has","root","_ancestorComponent","handleCommitFiberUnmount","delete","getNativeFromReactElement","getReactElementFromNative","dom","walkTree","cleanup","catchErrors","fn","arg","e","noop","initDevTools","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","onCommitRoot","onCommitUnmount","Math","random","preactRenderer","isDev","process","env","NODE_ENV","postMessage","source","reactBuildType","bundleType","version","rendererPackageName","findHostInstanceByFiber","findFiberByHostInstance","instance","_renderers","defineProperty","helpers","id","roots","getFiberRoots","add","onCommitFiberUnmount","prevVNodeHook","prevCommitRoot","commit","prevBeforeUnmount","unmount","prevBeforeDiff","prevAfterDiff","diffed","NaN","now","Component","callback","s","_nextState","assign","Date","performance"],"mappings":";;;;;;;;;AAOA,AAAO,SAASA,WAAT,CAAqBC,KAArB,EAA4B;MAC9BA,KAAK,CAACC,IAAN,KAAaC,QAAjB,IAA2B,OAAO,SAAP,GAA3B,KACK,IAAI,OAAOF,KAAK,CAACC,IAAb,KAAoB,UAAxB,IAAoC,OAAO,WAAP,GAApC,KACA,IAAI,OAAOD,KAAK,CAACC,IAAb,KAAoB,QAAxB,IAAkC,OAAO,QAAP;SAChC,MAAP;;;;;;;;AAQD,AAAO,SAASE,cAAT,CAAwBH,KAAxB,EAA+B;MACjCA,KAAK,CAACC,IAAN,KAAaC,QAAjB,IAA2B,OAAO,UAAP,GAA3B,KACK,IAAI,OAAOF,KAAK,CAACC,IAAb,KAAoB,UAAxB,IAAoC,OAAOD,KAAK,CAACC,IAAN,CAAWG,WAAX,IAA0BJ,KAAK,CAACC,IAAN,CAAWI,IAA5C,GAApC,KACA,IAAI,OAAOL,KAAK,CAACC,IAAb,KAAoB,QAAxB,IAAkC,OAAOD,KAAK,CAACC,IAAb;SAChC,OAAP;;;;;;;;;AASD,AAAO,SAASK,KAAT,CAAeC,GAAf,EAAoBC,IAApB,EAA0BC,KAA1B,EAAiC;MACnCC,IAAI,GAAGF,IAAI,CAACG,GAAL,EAAX;MACIC,MAAM,GAAGJ,IAAI,CAACK,MAAL,WAAaC,GAAD,EAAMC,IAAN,WAAeD,GAAG,GAAGA,GAAG,CAACC,IAAD,CAAN,GAAe,OAA7C,EAAmDR,GAAnD,CAAb;;MACIK,MAAJ,EAAY;IACXA,MAAM,CAACF,IAAD,CAAN,GAAeD,KAAf;;;;;;;;;AASF,AAAO,SAASO,OAAT,CAAiBhB,KAAjB,EAAwB;MAC1BiB,CAAC,GAAGjB,KAAK,CAACkB,UAAd;;;MAGIC,OAAO,GAAG,IAAd;;MAEIF,CAAC,IAAE,IAAP,EAAa;;;IAGZE,OAAO,GAAG;MACTC,QAAQ,EAAEH,CAAC,CAACG,QAAF,CAAWC,IAAX,CAAgBJ,CAAhB,CADD;MAETK,WAAW,EAAEL,CAAC,CAACK,WAAF,CAAcD,IAAd,CAAmBJ,CAAnB,CAFJ;;MAGTM,+BAAU,CAACf,IAAD,EAAOC,KAAP,EAAc;QACvBQ,CAAC,CAACG,QAAF,WAAWI;UACVlB,KAAK,CAACkB,IAAD,EAAOhB,IAAP,EAAaC,KAAb,CAAL;iBACOe,IAAP;SAFD;OAJQ;;MASTC,+BAAU,CAACjB,IAAD,EAAOC,KAAP,EAAc;QACvBH,KAAK,CAACN,KAAK,CAAC0B,KAAP,EAAclB,IAAd,EAAoBC,KAApB,CAAL;QACAQ,CAAC,CAACG,QAAF,CAAW,EAAX;OAXQ;;MAaTO,mCAAY,CAACnB,IAAD,EAAOC,KAAP,EAAc;QACzBH,KAAK,CAACW,CAAC,CAACW,OAAH,EAAYpB,IAAZ,EAAkBC,KAAlB,CAAL;QACAQ,CAAC,CAACG,QAAF,CAAW,EAAX;;;KAfF;;;MAoBGS,QAAQ,GAAGC,WAAW,CAAC9B,KAAD,CAA1B;MAEI+B,QAAQ,GAAG/B,KAAK,CAACgC,OAAN,GAAgBhC,KAAK,CAACiC,SAArC;SACO;IACNC,QAAQ,EAAEnC,WAAW,CAACC,KAAD,CADf;IAENC,IAAI,EAAED,KAAK,CAACC,IAFN;IAGNI,IAAI,EAAEF,cAAc,CAACH,KAAD,CAHd;IAINmC,GAAG,EAAEnC,KAAK,CAACmC,GAAN,IAAa,IAJZ;IAKNC,GAAG,EAAEpC,KAAK,CAACoC,GAAN,IAAa,IALZ;aAMNjB,OANM;IAONkB,IAAI,EAAErC,KAAK,CAACqC,IAPN;IAQNC,KAAK,EAAErB,CAAC,IAAE,IAAH,GAAUA,CAAC,CAACqB,KAAZ,GAAoB,IARrB;IASNZ,KAAK,EAAE1B,KAAK,CAAC0B,KATP;;IAWNG,QAAQ,EAAE7B,KAAK,CAACqC,IAAN,IAAY,IAAZ,GACPR,QAAQ,IAAE,IAAV,IAAkBA,QAAQ,CAACU,MAAT,IAAiB,CAAnC,IAAwCV,QAAQ,CAAC,CAAD,CAAR,CAAYQ,IAAZ,IAAkB,IAA1D,GACCR,QAAQ,CAAC,CAAD,CAAR,CAAYQ,IADb,GAECR,QAHM,GAIP,IAfG;IAgBNW,cAAc,EAAEC,WAAW,CAACzC,KAAD,CAhBrB;IAiBN0C,oBAAoB,EAAE,EAjBhB;;IAoBNC,cAAc,EAAEZ,QApBV;IAqBNa,eAAe,EAAE5C,KAAK,CAACiC,SArBjB;IAsBNY,gBAAgB,EAAEd;GAtBnB;;;;;;;;;AAgCD,AAAO,SAASD,WAAT,CAAqB9B,KAArB,EAA4B;MAC9BiB,CAAC,GAAGjB,KAAK,CAACkB,UAAd;;MAEID,CAAC,IAAE,IAAP,EAAa;WACLjB,KAAK,CAAC8C,SAAN,IAAiB,IAAjB,GAAwB9C,KAAK,CAAC8C,SAAN,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAxB,GAA0D,EAAjE;;;SAGM,CAACC,KAAK,CAACC,OAAN,CAAcjC,CAAC,CAACkC,UAAhB,CAAD,IAAgClC,CAAC,CAACkC,UAAF,IAAc,IAA9C,GACJ,CAAClC,CAAC,CAACkC,UAAH,CADI,GAEJ,IAFH;;;;;;;;AAUD,AAAO,SAASC,MAAT,CAAgBpD,KAAhB,EAAuB;;SAEtBA,KAAK,CAACC,IAAN,KAAaC,QAAb,IAAyBF,KAAK,CAACgC,OAAN,IAAe,CAAC,CAAhD;;;;;;;;;;;;;;AAcD,AAAO,SAASS,WAAT,CAAqBzC,KAArB,EAA4B;;MAE9BoD,MAAM,CAACpD,KAAD,CAAV,EAAmB;;;WAGXA,KAAK,CAAC8C,SAAN,CAAgBP,MAAhB,GAAyB,CAAzB,IAA8BvC,KAAK,CAAC8C,SAAN,CAAgB,CAAhB,EAAmBO,IAAnB,IAAyB,IAAvD;;IAELrD,KAAK,CAAC8C,SAAN,CAAgB,CAAhB,EAAmBO,IAAnB,CAAwBC,UAFnB,GAGJtD,KAHH;;;MAKGA,KAAK,CAACkB,UAAN,IAAkB,IAAtB,IAA4B,OAAOlB,KAAK,CAACkB,UAAb;MACxBlB,KAAK,CAACC,IAAN,KAAaC,QAAjB,IAA2B,OAAOF,KAAK,CAAC0B,KAAb;SACpB1B,KAAK,CAACqD,IAAb;;;;;;;;;;AAUD,AAAO,SAASE,YAAT,CAAsBC,CAAtB,EAAyBC,CAAzB,EAA4BC,OAA5B,EAAqC;MACvCF,CAAC,IAAE,IAAH,IAAWC,CAAC,IAAE,IAAlB,IAAwB,OAAO,KAAP;;OAEnBE,IAAIvB,GAAT,IAAgBoB,CAAhB,EAAmB;QACdE,OAAO,IAAItB,GAAG,IAAE,UAAhB,IAA8BqB,CAAC,CAACrB,GAAD,CAAD,IAAQ,IAA1C,IAAgD;QAC5CoB,CAAC,CAACpB,GAAD,CAAD,KAASqB,CAAC,CAACrB,GAAD,CAAd,IAAqB,OAAO,KAAP;;;MAGlBwB,MAAM,CAACC,IAAP,CAAYL,CAAZ,EAAejB,MAAf,KAAwBqB,MAAM,CAACC,IAAP,CAAYJ,CAAZ,EAAelB,MAA3C,IAAmD,OAAO,KAAP;SAC5C,IAAP;;;;;;;;;AASD,AAAO,SAASuB,cAAT,CAAwBtC,IAAxB,EAA8BuC,IAA9B,EAAoC;SAClCvC,IAAI,CAACE,KAAL,KAAeqC,IAAI,CAACrC,KAApB,IAA6B,CAAC6B,YAAY,CAAC/B,IAAI,CAACE,KAAN,EAAaqC,IAAI,CAACrC,KAAlB,EAAyB,IAAzB,CAA3C,IACFF,IAAI,CAACN,UAAL,IAAiB,IAAjB,IACH,CAACqC,YAAY,CAACQ,IAAI,CAAC7C,UAAL,CAAgB8C,UAAjB,EAA6BD,IAAI,CAAC7C,UAAL,CAAgBoB,KAA7C,CAFR,IAGHd,IAAI,CAAC6B,IAAL,KAAcU,IAAI,CAACV,IAHhB,IAIH7B,IAAI,CAACW,GAAL,KAAa4B,IAAI,CAAC5B,GAJtB;;;;;;;;;AAaD,AAAO,SAAS8B,qBAAT,CAA+BzC,IAA/B,EAAqCuC,IAArC,EAA2C;SAC1CvC,IAAI,CAACS,SAAL,KAAiB8B,IAAI,CAAC9B,SAAtB,IAAmCT,IAAI,CAACQ,OAAL,KAAe+B,IAAI,CAAC/B,OAA9D;;;ACjMM,SAASkC,SAAT,GAAqB;;MAEvBC,aAAa,GAAGC,OAAO,CAACC,IAA5B;;EAEAD,OAAO,CAACC,IAAR,aAAerE;;IACF0B;QACRG,QAAQ,GAAGH,KAAK,IAAIA,KAAK,CAACG,QAA9B;;QAEI5B,IAAI,KAAGqE,SAAX,EAAsB;YACf,IAAIC,KAAJ,CAAU,oDAAkDC,cAAc,CAACxE,KAAD,CAA1E,CAAN;;;QAIAA,KAAK,CAACmC,GAAN,KAAYmC,SAAZ,IACA,OAAOtE,KAAK,CAACmC,GAAb,KAAmB,UADnB,IAEA,OAAOnC,KAAK,CAACmC,GAAb,KAAmB,QAFnB,IAGA,EAAE,cAAcnC,KAAhB,CAJD;MAKE;cACK,IAAIuE,KAAJ,CACJ,0EAAD,GACC,+BAA2B,OAAOvE,KAAK,CAACmC,IAAI,gBAD7C,GAEAqC,cAAc,CAACxE,KAAD,CAHT,CAAN;OAdsB;;;QAsBnB,OAAOA,KAAK,CAACC,IAAb,KAAoB,UAApB,IAAkCD,KAAK,CAACC,IAAN,CAAWwE,SAAjD,EAA4D;MAC3DC,cAAc,CAAC1E,KAAK,CAACC,IAAN,CAAWwE,SAAZ,EAAuBzE,KAAK,CAAC0B,KAA7B,EAAoCvB,cAAc,CAACH,KAAD,CAAlD,EAA2DwE,cAAc,CAACxE,KAAD,CAAzE,CAAd;;;QAGG6D,IAAI,GAAG,EAAX;;SACK,kBAAiBc,YAAY,CAAC9C,QAAD,0BAAlC,EAA8C;MAAzC8B,IAAIiB;;UACJ,CAACA,SAAD,IAAcA,SAAS,CAACxC,GAAV,IAAe,IAAjC,IAAuC;UAEnCA,GAAG,GAAGwC,SAAS,CAACxC,GAApB;;UAEIyB,IAAI,CAACgB,OAAL,CAAazC,GAAb,MAAsB,CAAC,CAA3B,EAA8B;QAC7B0C,OAAO,CAACC,KAAR,CACC,2DACC,2BAAuB3C,GAAI,iDAD5B,GAEA,uCAFA,GAGAoC,cAAc,CAACxE,KAAD,CAJf,EAD6B;;;;;MAY9B6D,IAAI,CAACmB,IAAL,CAAU5C,GAAV;;;QAGG+B,aAAJ,IAAmBA,aAAa,CAACnE,KAAD,CAAb;GA/CpB;;;;;;;;AAwDD,AAAO,SAASwE,cAAT,CAAwBxE,KAAxB,EAA+B;EAC/B0B;MACFrB,IAAI,GAAGF,cAAc,CAACH,KAAD,CAAzB;MAEIiF,KAAK,GAAG,EAAZ;;MACIvD,KAAJ,EAAW;SACLiC,IAAIuB,IAAT,IAAiBxD,KAAjB,EAAwB;UACnBA,KAAK,CAACyD,cAAN,CAAqBD,IAArB,KAA8BA,IAAI,KAAG,UAAzC,EAAqD;YAChDzE,KAAK,GAAGiB,KAAK,CAACwD,IAAD,CAAjB,CADoD;;YAIhD,OAAOzE,KAAP,KAAe,UAAnB,EAA+B;UAC9BA,KAAK,GAAI,eAAWA,KAAK,CAACL,WAAN,IAAqBK,KAAK,CAACJ,KAAK,UAApD;;;QAGDI,KAAK,GAAGmD,MAAM,CAACnD,KAAD,CAAN,KAAkBA,KAAlB,IAA2B,CAACA,KAAK,CAAC2E,QAAlC,GACLxB,MAAM,CAACyB,SAAP,CAAiBD,QAAjB,CAA0BE,IAA1B,CAA+B7E,KAA/B,CADK,GAELA,KAAK,GAAG,EAFX;QAIAwE,KAAK,IAAK,MAAGC,IAAK,UAAGK,IAAI,CAACC,SAAL,CAAe/E,KAAf,CAAsB,CAA3C;;;;;MAKCoB,QAAQ,GAAGH,KAAK,CAACG,QAArB;gBACWxB,IAAK,GAAE4E,KAAM,IAAEpD,QAAQ,IAAIA,QAAQ,CAACU,MAArB,GACvB,UAAQlC,IAAR,GAAa,GADU,GAEvB,KAAM;;;;;;;;;ACpFV,AAAO,IAAMoF,QAAN,GACNC,iBAAW,CAACC,IAAD,EAAOC,GAAP,EAAY;;OAGjBA,GAAL,GAAWA,GAAX;OACKD,IAAL,GAAYA,IAAZ;;;OAGKE,OAAL,GAAe,EAAf;;;;;;;;;OASKC,UAAL,GAAkB,IAAIC,OAAJ,EAAlB;OACKC,SAAL,GAAiB,KAAjB;;;;;;;;AAODC,mBAAAA,0CAAgB;OACVD,SAAL,GAAiB,IAAjB;OACKE,kBAAL;;;;;;;AAMDA,mBAAAA,oDAAqB;MAChB,CAAC,KAAKF,SAAV,IAAqB;MAEjBG,MAAM,GAAG,KAAKN,OAAlB;OACKA,OAAL,GAAe,EAAf;;OACKlC,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAAC5D,MAA3B,EAAmC6D,CAAC,EAApC,EAAwC;QACnCC,KAAK,GAAGF,MAAM,CAACC,CAAD,CAAlB;SACKT,IAAL,CAAUW,IAAV,CAAeD,KAAK,CAACpG,IAArB,EAA2BoG,KAA3B;;;;;;;;;;;AAUFE,mBAAAA,wBAAMvG,KAAD,EAAQ;OACP8F,UAAL,CAAgBU,GAAhB,CAAoB/D,WAAW,CAACzC,KAAD,CAA/B,EAAwCA,KAAxC;MACIyG,IAAI,GAAGzF,OAAO,CAAChB,KAAD,CAAlB;;;MAGI0G,IAAI,GAAG,CAAC;oBACK,EAAE1G,KADP;UAEXyG,IAFW;IAGXE,QAAQ,EAAE,KAAKf,GAHJ;QAIP,EAAE;GAJI,CAAX,CALY;;MAaR3C,KAAK,CAACC,OAAN,CAAcuD,IAAI,CAAC5E,QAAnB,CAAJ,EAAkC;QAC7B+E,KAAK,GAAGH,IAAI,CAAC5E,QAAL,CAAcgF,KAAd,EAAZ;QACIC,IAAJ;;WACO,CAACA,IAAI,GAAGF,KAAK,CAACjG,GAAN,EAAR,KAAsB,IAA7B,EAAmC;UAC9BkB,QAAQ,GAAGC,WAAW,CAACgF,IAAD,CAA1B;MACAF,KAAK,CAAC5B,UAAN,CAAW,OAAGnD,QAAd;WAEKiE,UAAL,CAAgBU,GAAhB,CAAoB/D,WAAW,CAACqE,IAAD,CAA/B,EAAuCA,IAAvC;UAEIL,MAAI,GAAGzF,OAAO,CAAC8F,IAAD,CAAlB;UAEI,CAAC9B,IAAL,CAAU;wBACO,EAAE8B,IADT;cAETL,MAFS;QAGTE,QAAQ,EAAE,KAAKf,GAHN;YAIL,EAAE;OAJP;;;;OASGjC,IAAIyC,CAAC,GAAGM,IAAI,CAACnE,MAAlB,EAA0B,EAAE6D,CAAF,IAAK,CAA/B,GAAmC;SAC7BP,OAAL,CAAab,IAAb,CAAkB0B,IAAI,CAACN,CAAD,CAAtB;GAlCW;;;MAsCRhD,MAAM,CAACpD,KAAD,CAAV,EAAmB;SACb6F,OAAL,CAAab,IAAb,CAAkB;sBACD,EAAEhF,KADD;YAEjByG,IAFiB;MAGjBE,QAAQ,EAAE,KAAKf,GAHE;UAIb,EAAE;KAJP;;;;;;;;;AAaFmB,mBAAAA,0BAAO/G,KAAD,EAAQ;MACTyG,IAAI,GAAGzF,OAAO,CAAChB,KAAD,CAAlB,CADa;;MAITiD,KAAK,CAACC,OAAN,CAAcuD,IAAI,CAAC5E,QAAnB,CAAJ,EAAkC;SAC5B8B,IAAIyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGK,IAAI,CAAC5E,QAAL,CAAcU,MAAlC,EAA0C6D,CAAC,EAA3C,EAA+C;UAC1CY,KAAK,GAAGP,IAAI,CAAC5E,QAAL,CAAcuE,CAAd,CAAZ;UACIa,IAAI,GAAGxE,WAAW,CAACuE,KAAD,CAAtB;UAEIE,SAAS,GAAG,KAAKpB,UAAL,CAAgBqB,GAAhB,CAAoBF,IAApB,CAAhB;UACIC,SAAS,IAAE,IAAf,IAAqB,KAAKX,KAAL,CAAWS,KAAX,IAArB,OACK,KAAKD,MAAL,CAAYC,KAAZ,IANyC;;MAS9CP,IAAI,CAAC5E,QAAL,CAAcuE,CAAd,IAAmB,KAAKN,UAAL,CAAgBqB,GAAhB,CAAoBF,IAApB,CAAnB;;;;MAIEzF,IAAI,GAAG,KAAKsE,UAAL,CAAgBqB,GAAhB,CAAoBV,IAAI,CAACjE,cAAzB,CAAX,CAlBa;;;MAsBT,CAACsB,cAAc,CAACtC,IAAD,EAAOxB,KAAP,CAAf,IAAgCiE,qBAAqB,CAACzC,IAAD,EAAOxB,KAAP,CAAzD,EAAwE;SAClE6F,OAAL,CAAab,IAAb,CAAkB;;;;;;sBAMD,EAAExD,IAND;YAOjBiF,IAPiB;MAQjBE,QAAQ,EAAE,KAAKf,GARE;UASb,EAAE;KATP;;;;OAcIC,OAAL,CAAab,IAAb,CAAkB;;;;;;oBAMD,EAAExD,IAND;UAOjBiF,IAPiB;IAQjBE,QAAQ,EAAE,KAAKf,GARE;QASb,EAAE;GATP;;;;;;;;;;AAmBDwB,mBAAAA,wDAAsBpH,KAAD,EAAQ;MACxBiH,IAAI,GAAGxE,WAAW,CAACzC,KAAD,CAAtB;MAEI,KAAK8F,UAAL,CAAgBuB,GAAhB,CAAoBJ,IAApB,CAAJ,IAA+B,KAAKF,MAAL,CAAY/G,KAAZ,IAA/B,OACK,KAAKuG,KAAL,CAAWvG,KAAX,IAJuB;;;;;;MAUxBsH,IAAI,GAAG,IAAX;;MACIlE,MAAM,CAACpD,KAAD,CAAV,EAAmB;;IAGjBA,KAAD,CAAQ6C,gBAAR,GAA2B,CAA3B;QACI,GAAG7C,KAAP;GAJD,MAMK;;;;IAIJsH,IAAI,GAAGtH,KAAK,CAACkB,UAAb;;WACOoG,IAAI,CAACC,kBAAL,IAAyB,IAAhC,EAAsC;MACrCD,IAAI,GAAGA,IAAI,CAACC,kBAAZ;;;;OAIG1B,OAAL,CAAab,IAAb,CAAkB;oBACD,EAAEsC,IADD;IAEjBX,QAAQ,EAAE,KAAKf,GAFE;IAGjBa,IAAI,EAAEzF,OAAO,CAACsG,IAAD,CAHI;QAIb,EAAE;GAJP;OAOKpB,kBAAL;SACOlG,KAAP;;;;;;;;;;AASDwH,mBAAAA,8DAAyBxH,KAAD,EAAQ;MAC3BiH,IAAI,GAAGxE,WAAW,CAACzC,KAAD,CAAtB;OACK8F,UAAL,CAAgB2B,MAAhB,CAAuBR,IAAvB,EAF+B;;;;OAQ1BpB,OAAL,CAAab,IAAb,CAAkB;oBACD,EAAEhF,KADD;IAEjB2G,QAAQ,EAAE,KAAKf,GAFE;QAGb,EAAE;GAHP;;;;;;;;;AAYD8B,mBAAAA,gEAA0B1H,KAAD,EAAQ;SACzBA,KAAK,CAACqD,IAAb;;;;;;;;;AAQDsE,mBAAAA,gEAA0BC,GAAD,EAAM;SACvB,KAAK9B,UAAL,CAAgBqB,GAAhB,CAAoBS,GAApB,KAA4B,IAAnC;EAxOoB;;;;;AA6OrBC,mBAAAA,gCAAW,GA7OU;;;;;AAiPrBC,mBAAAA,8BAAU;;;;;;;;;AC/OX,SAASC,WAAT,CAAqBC,EAArB,EAAyB;SACjB,UAASC,GAAT,EAAc;QAChB;aACID,EAAE,CAACC,GAAD,CAAT;KADD,CAGA,OAAOC,CAAP,EAAU;;MAETpD,OAAO,CAACC,KAAR,CAAc,yCAAd;;;MAEAD,OAAO,CAACC,KAAR,CAAcmD,CAAd,EAJS;;GAJX;;;;;AAcDvE,IAAIwE,IAAI,wBAAS7D,YAAjB;;AAEA,AAAO,SAAS8D,YAAT,GAAwB;;;;MAG1BzC,IAAI,GAAI0C,MAAD,CAASC,8BAApB;MACI3C,IAAI,IAAE,IAAV,IAAgB;;;MAGZ4C,YAAY,GAAGJ,IAAnB;;;MAGIK,eAAe,GAAGL,IAAtB,CAV8B;;MAa1BvC,GAAG,GAAG6C,IAAI,CAACC,MAAL,GAActD,QAAd,CAAuB,EAAvB,EAA2ByB,KAA3B,CAAiC,CAAjC,CAAV;MACI8B,cAAc,GAAG,IAAIlD,QAAJ,CAAaE,IAAb,EAAmBC,GAAnB,CAArB;EAEAmC,WAAW;QACNa,KAAK,GAAG,KAAZ;;QACI;MACHA,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAuB,YAA/B;KADD,CAGA,OAAOb,CAAP,EAAU,EALO;;;IAQjBG,MAAM,CAACzH,MAAP,CAAcoI,WAAd,CAA0B;MACzBC,MAAM,EAAE,yBADiB;MAEzBC,cAAc;;MAA8BN,KAAK,GAC9C,aAD8C,GAE9C;KAJJ,EAKG,GALH;QAOIjC,QAAQ,GAAG;MACdwC,UAAU;;MAA8BP,KAAK,GAAG,CAAH,GAAO,CADtC;MAEdQ,OAAO,EAAE,QAFK;MAGdC,mBAAmB,EAAE,QAHP;;;;MAMdC,yDAAuB,CAACtJ,KAAD,EAAQ;eACvBA,KAAK,CAACqD,IAAb;OAPa;;;;MAWdkG,yDAAuB,CAACC,QAAD,EAAW;eAC1Bb,cAAc,CAAC7C,UAAf,CAA0BqB,GAA1B,CAA8BqC,QAA9B,KAA2C,IAAlD;;;KAZF;IAgBA7D,IAAI,CAAC8D,UAAL,CAAgB7D,GAAhB,IAAuBe,QAAvB,CA/BiB;;;;IAoCjB/C,MAAM,CAAC8F,cAAP,CAAsB/D,IAAI,CAACgE,OAA3B,EAAoC/D,GAApC,EAAyC;MACxCuB,GAAG,uBAAQwB,iBAD6B;MAExCnC,GAAG;YACE,CAACmC,cAAc,CAAC3C,SAApB,EAA+B;UAC9B2D,OAAO,CAAC1D,aAAR;;;KAJH;QASI0D,OAAO,GAAGhE,IAAI,CAACgE,OAAL,CAAa/D,GAAb,CAAd,CA7CiB;;IAgDjBD,IAAI,CAACW,IAAL,CAAU,mBAAV,EAA+B;MAC9BsD,EAAE,EAAEhE,GAD0B;gBAE9Be,QAF8B;eAG9BgD;KAHD;IAMApB,YAAY,GAAGR,WAAW,WAACT;;UAEtBA,IAAI,CAACrH,IAAL,KAAYC,QAAZ,IAAwBoH,IAAI,CAACxE,SAAL,CAAeP,MAAf,IAAuB,CAAnD,IAAsD;UAElDsH,KAAK,GAAGlE,IAAI,CAACmE,aAAL,CAAmBlE,GAAnB,CAAZ;MACA0B,IAAI,GAAGqC,OAAO,CAACvC,qBAAR,CAA8BE,IAA9B,CAAP;UACI,CAACuC,KAAK,CAACxC,GAAN,CAAUC,IAAV,CAAL,IAAsBuC,KAAK,CAACE,GAAN,CAAUzC,IAAV;KANG,CAA1B;IASAkB,eAAe,GAAGT,WAAW,WAAC/H;MAC7B2F,IAAI,CAACqE,oBAAL,CAA0BpE,GAA1B,EAA+B5F,KAA/B;KAD4B,CAA7B;GA/DU,CAAX,GAhB8B;;MAqF1BiK,aAAa,GAAG7F,OAAO,CAACpE,KAA5B;MACIkK,cAAc,GAAG9F,OAAO,CAAC+F,MAA7B;MACIC,iBAAiB,GAAGhG,OAAO,CAACiG,OAAhC;MACIC,cAAc,GAAGlG,OAAO,CAACC,IAA7B;MACIkG,aAAa,GAAGnG,OAAO,CAACoG,MAA5B;;EAEApG,OAAO,CAACpE,KAAR,aAAiBA;;;;;IAKhBA,KAAK,CAACiC,SAAN,GAAkBwI,GAAlB;IACAzK,KAAK,CAACgC,OAAN,GAAgByI,GAAhB;IAEAzK,KAAK,CAACiC,SAAN,GAAkB,CAAlB;IACAjC,KAAK,CAACgC,OAAN,GAAgB,CAAC,CAAjB;QACIiI,aAAJ,IAAmBA,aAAa,CAACjK,KAAD,CAAb;GAVpB;;EAaAoE,OAAO,CAACC,IAAR,aAAgBrE;IACfA,KAAK,CAACiC,SAAN,GAAkByI,GAAG,EAArB;QACIJ,cAAc,IAAE,IAApB,IAA0BA,cAAc,CAACtK,KAAD,CAAd;GAF3B;;EAKAoE,OAAO,CAACoG,MAAR,aAAkBxK;IACjBA,KAAK,CAACgC,OAAN,GAAgB0I,GAAG,EAAnB;QACIH,aAAa,IAAE,IAAnB,IAAyBA,aAAa,CAACvK,KAAD,CAAb;GAF1B;;EAKAoE,OAAO,CAAC+F,MAAR,GAAiBpC,WAAW,WAAE/H;;QAEzBkK,cAAc,IAAE,IAApB,IAA0BA,cAAc,CAAClK,KAAD,CAAd,GAFa;;QAKnCA,KAAK,IAAE,IAAX,IAAiB;IACjBuI,YAAY,CAACvI,KAAD,CAAZ;GAN2B,CAA5B;EASAoE,OAAO,CAACiG,OAAR,GAAkBtC,WAAW,WAAE/H;;QAE1BoK,iBAAiB,IAAE,IAAvB,IAA6BA,iBAAiB,CAACpK,KAAD,CAAjB;IAC7BwI,eAAe,CAACxI,KAAD,CAAf;GAH4B,CAA7B,CA3H8B;;MAkIxBoB,QAAQ,GAAGuJ,SAAS,CAACtF,SAAV,CAAoBjE,QAArC;;EACAuJ,SAAS,CAACtF,SAAV,CAAoBjE,QAApB,GAA+B,UAAS2F,MAAT,EAAiB6D,QAAjB,EAA2B;;QAErDC,CAAC,GAAI,KAAKC,UAAL,KAAkB,KAAKxI,KAAvB,IAAgC,KAAKwI,UAAtC,KAAsD,KAAKA,UAAL,GAAkBlH,MAAM,CAACmH,MAAP,CAAc,EAAd,EAAkB,KAAKzI,KAAvB,CAAxE,CAAR,CAFyD;;SAKpD0B,UAAL,GAAkBJ,MAAM,CAACmH,MAAP,CAAc,EAAd,EAAkBF,CAAlB,CAAlB;WAEOzJ,QAAQ,CAACkE,IAAT,CAAc,IAAd,EAAoByB,MAApB,EAA4B6D,QAA5B,CAAP;GAPD;;;;;;;AAeD,AAAOjH,IAAI+G,GAAG,GAAGM,IAAI,CAACN,GAAf;;AAEP,IAAI;;EAEHA,GAAG,GAAGO,WAAW,CAACP,GAAZ,CAAgBrJ,IAAhB,CAAqB4J,WAArB,CAAN;CAFD,CAIA,OAAO/C,CAAP,EAAU;;AC/KV,IAAIW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAuB,aAA3B,EAA0C;EACzC7E,SAAS;EACTkE,YAAY;"}